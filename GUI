-- this is the gui ignore these btw because i have to turn them obfuscated

-- GuiScript.lua

-- Create a ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AvatarCopierGui"

-- Create a Frame to hold the player list
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 200, 0, 300)
frame.Position = UDim2.new(0.5, -100, 0.5, -150)
frame.Parent = screenGui

-- Create a UIListLayout for the player list
local uiListLayout = Instance.new("UIListLayout")
uiListLayout.Parent = frame

-- Function to copy the avatar
local function copyAvatar(targetPlayerName)
    local player = game.Players.LocalPlayer
    local targetPlayer = game.Players:FindFirstChild(targetPlayerName)
    if not targetPlayer then
        warn("Target player not found")
        return
    end

    local targetCharacter = targetPlayer.Character
    if not targetCharacter then
        warn("Target player's character not found")
        return
    end

    local character = player.Character
    if not character then
        warn("Your character not found")
        return
    end

    for _, part in pairs(targetCharacter:GetChildren()) do
        if part:IsA("Accessory") or part:IsA("Clothing") or part:IsA("BodyColors") then
            part:Clone().Parent = character
        elseif part:IsA("Shirt") or part:IsA("Pants") then
            character[part.Name] = part:Clone()
        end
    end

    local bodyColors = targetCharacter:FindFirstChildOfClass("BodyColors")
    if bodyColors then
        local newBodyColors = bodyColors:Clone()
        newBodyColors.Parent = character
    end
end

-- Function to update the player list
local function updatePlayerList()
    for _, child in pairs(frame:GetChildren()) do
        if child:IsA("TextButton") then
            child:Destroy()
        end
    end

    for _, player in pairs(game.Players:GetPlayers()) do
        local button = Instance.new("TextButton")
        button.Size = UDim2.new(1, 0, 0, 50)
        button.Text = player.Name
        button.Parent = frame

        button.MouseButton1Click:Connect(function()
            copyAvatar(player.Name)
        end)
    end
end

-- Connect player added and removed events to update the player list
game.Players.PlayerAdded:Connect(updatePlayerList)
game.Players.PlayerRemoving:Connect(updatePlayerList)

-- Initial update of the player list
updatePlayerList()

return screenGui
